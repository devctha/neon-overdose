/* =========================================
   NEON OVERDOSE: HIGH-END CYBERPUNK STYLE
   ========================================= */

/* 1. VARIÁVEIS & CORE */
:root {
    --bg: #030303;           /* Preto Quase Absoluto */
    --primary: #ffffff;      /* Branco Puro (Texto/Destaque) */
    --accent: #bc13fe;       /* Roxo Neon (Tema JJK/Mágico) */
    --pink: #ff0055;         /* Rosa Agressivo (Perigo/Ação) */
    --yellow: #f0e600;       /* Amarelo (Gold/Moeda) */
    
    --grid-color: rgba(188, 19, 254, 0.15); /* Grid Roxo Sutil */
    
    /* Variáveis Dinâmicas de Fase */
    --phase-color: rgba(188, 19, 254, 0.3);
    --phase-bg: #020202;

    --font-main: 'Rajdhani', sans-serif;
    --font-title: 'Orbitron', sans-serif;
}

body {
    margin: 0; overflow: hidden; background: var(--bg);
    font-family: var(--font-main); color: var(--primary);
    user-select: none; cursor: crosshair;
}

/* =========================================
   2. GAME STAGE (FUNDO 3D)
   ========================================= */
#game-stage {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background: var(--phase-bg);
    overflow: hidden;
    perspective: 800px;
    z-index: 0;
}

canvas { 
    display: block; position: absolute; top: 0; left: 0; 
    z-index: 10; background: transparent !important; 
}

/* Grid do Chão (Infinito) */
.stage-grid {
    position: absolute; width: 300%; height: 300%;
    bottom: -100%; left: -100%;
    background-image:
        linear-gradient(var(--phase-color) 1px, transparent 1px),
        linear-gradient(90deg, var(--phase-color) 1px, transparent 1px);
    background-size: 80px 80px;
    transform: rotateX(75deg);
    animation: stageGridMove 8s linear infinite;
    box-shadow: inset 0 0 300px rgba(0,0,0,1); /* Vinheta forte */
    opacity: 0.6;
}

@keyframes stageGridMove {
    0% { transform: rotateX(75deg) translateY(0); }
    100% { transform: rotateX(75deg) translateY(80px); }
}

/* Utilitários */
.hidden { display: none !important; }

.overlay-screen {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(3, 3, 3, 0.95); z-index: 20;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
}

/* =========================================
   3. MENU PRINCIPAL (NOVO DESIGN CLEAN)
   ========================================= */
#menu-layer {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background: #020202;
    z-index: 50; display: flex; align-items: center; justify-content: center;
    overflow: hidden;
    perspective: 1000px;
}

/* Background Effects do Menu */
.cyber-grid {
    position: absolute; width: 200%; height: 200%; bottom: -50%; left: -50%;
    background-image: 
        linear-gradient(var(--grid-color) 1px, transparent 1px),
        linear-gradient(90deg, var(--grid-color) 1px, transparent 1px);
    background-size: 50px 50px;
    transform: rotateX(45deg);
    animation: gridMove 20s linear infinite;
    pointer-events: none;
}
@keyframes gridMove {
    0% { transform: rotateX(45deg) translateY(0); }
    100% { transform: rotateX(45deg) translateY(50px); }
}

.scanlines {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.1) 50%, rgba(0,0,0,0.1));
    background-size: 100% 4px; pointer-events: none; z-index: 55;
}

.vignette {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background: radial-gradient(circle, transparent 30%, #000 90%);
    pointer-events: none; z-index: 54;
}

/* Caixa do Menu (Glassmorphism) */
.menu-content { 
    position: relative; z-index: 60; text-align: center; 
    padding: 60px 80px; 
    
    /* Estilo Vidro/High-End */
    background: rgba(10, 10, 10, 0.75);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-left: 6px solid var(--accent); /* Detalhe Roxo Lateral */
    box-shadow: 0 0 100px rgba(188, 19, 254, 0.15);
    
    transform: skewX(-2deg); /* Leve inclinação para estilo */
    min-width: 450px;
}

/* =========================================
   4. TIPOGRAFIA & LOGO
   ========================================= */
.logo {
    font-family: var(--font-title); font-size: 90px; font-weight: 900;
    color: var(--primary); margin: 0; line-height: 0.9;
    text-shadow: 4px 4px 0px var(--accent); /* Sombra Sólida Roxa */
    letter-spacing: -2px;
}

.sub-logo {
    font-family: var(--font-main); font-size: 20px; letter-spacing: 14px;
    color: var(--pink); margin-bottom: 50px; font-weight: 700;
    text-transform: uppercase;
}

/* Efeito Glitch no Texto */
.glitch { position: relative; }
.glitch::before, .glitch::after {
    content: attr(data-text); position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background: #050505; opacity: 0.8;
}
.glitch::before {
    left: 2px; text-shadow: -1px 0 var(--pink); clip-path: inset(44% 0 61% 0);
    animation: glitch-anim 2s infinite linear alternate-reverse;
}
.glitch::after {
    left: -2px; text-shadow: -1px 0 var(--accent); clip-path: inset(50% 0 30% 0);
    animation: glitch-anim 2.5s infinite linear alternate-reverse;
}
@keyframes glitch-anim {
    0% { clip-path: inset(80% 0 2% 0); }
    20% { clip-path: inset(10% 0 80% 0); }
    40% { clip-path: inset(40% 0 10% 0); }
    60% { clip-path: inset(80% 0 5% 0); }
    80% { clip-path: inset(20% 0 60% 0); }
    100% { clip-path: inset(10% 0 40% 0); }
}

/* =========================================
   5. BOTÕES (CYBER-BTN)
   ========================================= */
.menu-buttons { display: flex; flex-direction: column; gap: 15px; }

.cyber-btn {
    display: block; width: 100%; padding: 18px 0;
    background: rgba(0,0,0,0.4); 
    border: 1px solid #333;
    border-left: 2px solid var(--primary);
    
    color: var(--primary); 
    font-family: var(--font-title); font-size: 16px;
    text-transform: uppercase; letter-spacing: 4px; cursor: pointer;
    position: relative; transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
    overflow: hidden;
}

.cyber-btn:hover {
    background: var(--primary);
    color: var(--bg);
    border-color: var(--primary);
    box-shadow: 0 0 30px var(--accent); /* Glow Roxo */
    transform: translateX(5px) scale(1.02);
    font-weight: 900;
}

.btn-tag {
    position: absolute; right: 10px; bottom: 5px;
    font-size: 9px; color: #666; opacity: 0.7; letter-spacing: 1px;
}
.cyber-btn:hover .btn-tag { color: var(--bg); }

.btn.small { width: auto; padding: 10px 40px; display: inline-block; margin-top: 20px; }

/* =========================================
   6. HUD (INTERFACE IN-GAME)
   ========================================= */
#ui-layer { position: absolute; width: 100%; height: 100%; pointer-events: none; z-index: 10; }

.hud-top { display: flex; justify-content: space-between; padding: 30px; }

.hud-box {
    background: rgba(0,0,0,0.8); border: 1px solid #333;
    padding: 10px 25px; transform: skewX(-15deg);
    min-width: 140px; text-align: right;
    box-shadow: 0 5px 20px rgba(0,0,0,0.5);
}
.hud-box.cyan { border-left: 4px solid var(--accent); } /* Loop agora é Roxo */
.hud-box.yellow { border-left: 4px solid var(--yellow); }

.label { display: block; font-size: 10px; color: #888; letter-spacing: 3px; margin-bottom: 2px; }
.value { font-family: var(--font-title); font-size: 32px; font-weight: bold; color: #fff; }

.hud-center { position: absolute; bottom: 50px; left: 50%; transform: translateX(-50%); width: 600px; text-align: center; }

/* Boss & Timer Bars */
.bar-bg { width: 100%; background: #111; border: 1px solid #444; height: 8px; margin-top: 8px; border-radius: 0; position: relative; }
.bar-fill { height: 100%; width: 100%; transition: width 0.1s linear; }

/* Boss Bar = Roxo (JJK style) */
#boss-container { margin-bottom: 25px; }
#boss-hp { background: var(--accent); box-shadow: 0 0 15px var(--accent); }
.boss-name { 
    font-family: var(--font-title); color: var(--accent); 
    font-size: 20px; letter-spacing: 6px; 
    text-shadow: 0 0 10px rgba(188, 19, 254, 0.5); 
}

/* Timer Bar = Gradiente Rosa/Branco */
.timer-fill { background: linear-gradient(90deg, var(--pink), var(--primary)); }
.timer-info { display: flex; justify-content: space-between; font-size: 12px; color: #666; font-family: var(--font-title); letter-spacing: 2px; }

/* =========================================
   7. SHOP & CURRENCY
   ========================================= */
.currency-display {
    border: 1px solid rgba(255,255,255,0.1);
    display: inline-block; padding: 12px 35px; margin-bottom: 40px;
    background: rgba(0,0,0,0.6); 
    border-bottom: 2px solid var(--yellow);
}
.currency-label { color: #888; font-size: 10px; letter-spacing: 2px; }
.currency-val { color: var(--yellow); font-size: 28px; font-family: var(--font-title); font-weight: bold; margin-left: 10px;}

.version-tag {
    position: absolute; bottom: 20px; right: 20px;
    font-size: 10px; color: #333; letter-spacing: 2px; font-family: monospace;
}

.shop-header { 
    text-align: center; margin-bottom: 20px; position: relative; z-index: 10; width: 100%; 
    background: rgba(0,0,0,0.9); padding: 30px 0; border-bottom: 1px solid #222;
}
.shop-header h2 { font-family: var(--font-title); color: var(--primary); font-size: 40px; margin: 0; text-shadow: 0 0 20px rgba(255,255,255,0.2); }

.shop-grid {
    display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px;
    width: 90%; max-width: 1200px; max-height: 70vh; overflow-y: auto; padding: 20px;
    scrollbar-width: thin; scrollbar-color: var(--accent) #111;
}

/* Shop Card */
.shop-card {
    background: #0a0a0a; border: 1px solid #333; padding: 25px; text-align: center;
    cursor: pointer; transition: 0.3s; position: relative; opacity: 0.7;
    display: flex; flex-direction: column; justify-content: space-between; height: 160px;
}
.shop-card:hover { 
    transform: translateY(-5px); border-color: var(--primary); opacity: 1; 
    z-index: 5; background: #111; box-shadow: 0 5px 20px rgba(0,0,0,0.5);
}

.shop-card.owned { 
    border-color: var(--accent); opacity: 1; 
    box-shadow: inset 0 0 15px rgba(188, 19, 254, 0.1); 
    background: linear-gradient(180deg, rgba(188, 19, 254, 0.05) 0%, transparent 100%);
}
.shop-card h3 { font-size: 14px; margin: 0; color: #fff; font-family: var(--font-title); letter-spacing: 1px; }
.shop-card p { font-size: 11px; color: #777; margin: 10px 0; line-height: 1.4; }
.shop-card .cost { font-weight: bold; font-family: var(--font-title); font-size: 14px; }

.shop-info-text { text-align: center; color: #666; margin-bottom: 10px; font-size: 12px; text-transform: uppercase; letter-spacing: 1px; }

/* =========================================
   8. PERK CARDS (SELEÇÃO IN-GAME)
   ========================================= */
#perk-layer {
    background: rgba(3, 3, 3, 0.96);
    backdrop-filter: blur(10px);
    z-index: 100;
}

#perk-options {
    display: flex; gap: 40px; justify-content: center; align-items: center; flex-wrap: wrap; padding: 20px;
}

.perk-card {
    width: 260px; height: 380px;
    background: #080808;
    border: 1px solid #333;
    /* Recorte futurista */
    clip-path: polygon(20px 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%, 0 20px);
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    padding: 30px; cursor: pointer; position: relative;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.perk-card:hover { transform: translateY(-20px) scale(1.05); background: #111; z-index: 10; }

.perk-card .icon { font-size: 50px; margin-bottom: 30px; transition: 0.3s; opacity: 0.8; }
.perk-card:hover .icon { opacity: 1; transform: scale(1.2); }

.perk-card h3 { 
    font-family: var(--font-title); font-size: 18px; text-transform: uppercase; 
    margin-bottom: 15px; text-align: center; line-height: 1.2; letter-spacing: 1px;
}
.perk-card p { font-family: var(--font-main); font-size: 14px; color: #777; text-align: center; line-height: 1.5; }
.perk-card:hover p { color: #aaa; }

/* Rarities Colors */
.perk-card.common { border-color: #444; }
.perk-card.common:hover { border-color: #fff; box-shadow: 0 0 30px rgba(255,255,255,0.1); }
.perk-card.common h3 { color: #fff; }

.perk-card.rare { border-color: var(--pink); }
.perk-card.rare:hover { box-shadow: 0 0 50px rgba(255, 0, 85, 0.3); border-color: var(--pink); }
.perk-card.rare h3 { color: var(--pink); }
.perk-card.rare .icon { color: var(--pink); text-shadow: 0 0 20px var(--pink); }

.perk-card.legend { 
    border-color: var(--accent); 
    background: radial-gradient(circle at top, rgba(188,19,254,0.1), transparent 70%);
    animation: pulseBorder 3s infinite alternate; 
}
.perk-card.legend:hover { box-shadow: 0 0 60px rgba(188, 19, 254, 0.4); }
.perk-card.legend h3 { color: var(--accent); text-shadow: 0 0 10px var(--accent); }
.perk-card.legend .icon { color: var(--accent); text-shadow: 0 0 30px var(--accent); }

@keyframes pulseBorder { 
    0% { border-color: var(--accent); box-shadow: 0 0 10px rgba(188,19,254,0.1); } 
    100% { border-color: #e08aff; box-shadow: 0 0 30px rgba(188,19,254,0.3); } 
}

/* =========================================
   9. GAME OVER & EXTRAS
   ========================================= */
#game-over-layer { text-align: center; }

.red-glow {
    color: var(--pink); text-shadow: 0 0 30px var(--pink);
    font-family: var(--font-title); font-size: 80px; margin-bottom: 20px;
    letter-spacing: -2px;
}

.end-stats p { margin: 10px 0; font-size: 20px; color: #888; letter-spacing: 2px; }
.end-stats span { color: #fff; }

/* Dev Console */
.dev-console { margin-top: 50px; opacity: 0.3; transition: 0.3s; }
.dev-console:hover { opacity: 1; }
#dev-code {
    background: transparent; border: none; border-bottom: 1px solid #333;
    color: var(--accent); font-family: var(--font-main);
    padding: 10px; text-align: center; text-transform: uppercase;
    width: 150px; letter-spacing: 2px; outline: none;
}
#dev-msg { height: 20px; font-size: 10px; color: var(--pink); margin-top: 5px; font-family: var(--font-title); }